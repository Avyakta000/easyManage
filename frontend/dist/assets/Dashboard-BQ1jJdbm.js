import{u as M}from"./userStore-jQTtqRXF.js";import{o as r,c as d,b as s,_ as y,e as C,u as B,r as x,j as i,f as l,k,w as b,i as _,t as S,d as I,n as L,g as U,h as j,v as A,H as D,l as H,m as R,a as V,p as O}from"./index-Bu5De__H.js";import{U as E}from"./UserInfo-CsWLDndY.js";import{b as N,_ as P,a as $,c as W}from"./jwt-OtR3VY-h.js";function Y(o,e){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m12.75 15 3-3m0 0-3-3m3 3h-7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function T(o,e){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 9h16.5m-16.5 6.75h16.5"})])}function F(o,e){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 6.75 22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3-4.5 16.5"})])}function Z(o,e){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})])}function z(o,e){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"})])}function J(o,e){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})])}const Q={name:"Sidebar",components:{HomeIcon:Z,UserIcon:J,LockClosedIcon:z,ArrowRightCircleIcon:Y,Bars2Icon:T,CodeBracketIcon:F},setup(){const o=C(),e=B(),n=o.user,t=(n==null?void 0:n.role)==="ADMIN",c=x(!1),p=()=>{c.value=!c.value},a=()=>{o.logout().then(()=>{e.push("/login")})},g=new Date().getFullYear();return{auth:o,isSidebarOpen:c,toggleSidebar:p,handleLogout:a,isAdmin:t,currentYear:g}}},q={class:"flex-1 px-4 py-6 space-y-4 mt-10"},G={class:"px-4 fixed bottom-0 w-64 py-4 bg-gray-900 text-center border-t border-blue-500"},K={class:"text-sm flex flex-col"},X={class:"flex items-center space-x-2 justify-center p-2"};function ee(o,e,n,t,c,p){const a=i("Bars2Icon"),g=i("HomeIcon"),m=i("router-link"),f=i("UserIcon"),h=i("LockClosedIcon"),v=i("ArrowRightCircleIcon"),w=i("CodeBracketIcon");return r(),d("div",null,[s("button",{onClick:e[0]||(e[0]=(...u)=>t.toggleSidebar&&t.toggleSidebar(...u)),class:"lg:hidden z-40 fixed top-4 left-4 text-white p-2 bg-gray-900 rounded-md"},[l(a,{class:"h-6 w-6"})]),s("aside",{class:L(["fixed inset-0 h-screen w-64 bg-blue-600 text-white flex flex-col shadow-lg",t.isSidebarOpen?"hidden":"block","lg:block"])},[e[11]||(e[11]=s("div",{class:"bg-blue-700 text-center p-2"},"Menu",-1)),s("nav",q,[t.isAdmin?(r(),k(m,{key:0,to:"/dashboard/admin",class:"flex items-center space-x-2 px-4 py-2 rounded-lg hover:bg-blue-500 transition","exact-active-class":"bg-blue-800"},{default:b(()=>[l(g,{class:"h-6 w-6"}),e[2]||(e[2]=s("span",null,"Admin",-1))]),_:1})):(r(),k(m,{key:1,to:"/dashboard",class:"flex items-center space-x-2 px-4 py-2 rounded-lg hover:bg-blue-500 transition","exact-active-class":"bg-blue-800"},{default:b(()=>[l(g,{class:"h-6 w-6"}),e[3]||(e[3]=s("span",null,"Home",-1))]),_:1})),l(m,{to:"/dashboard/profile",class:"flex items-center space-x-2 px-4 py-2 rounded-lg hover:bg-blue-500 transition","exact-active-class":"bg-blue-800"},{default:b(()=>[l(f,{class:"h-6 w-6"}),e[4]||(e[4]=s("span",null,"Profile",-1))]),_:1}),l(m,{to:"/dashboard/reset-password",class:"flex items-center space-x-2 px-4 py-2 rounded-lg hover:bg-blue-500 transition","exact-active-class":"bg-blue-800"},{default:b(()=>[l(h,{class:"h-6 w-6"}),e[5]||(e[5]=s("span",null,"Password",-1))]),_:1}),t.auth.isAuthenticated?(r(),d("button",{key:2,onClick:e[1]||(e[1]=(...u)=>t.handleLogout&&t.handleLogout(...u)),class:"w-full flex items-center space-x-2 text-left px-4 py-2 rounded-lg hover:bg-blue-500 transition"},[l(v,{class:"h-6 w-6"}),e[6]||(e[6]=s("span",null,"Logout",-1))])):_("",!0)]),s("footer",G,[s("div",K,[s("span",null,"Â© "+S(t.currentYear)+" Easy Manage",1),s("div",X,[e[7]||(e[7]=s("span",{class:"italic"},"Developed by",-1)),e[8]||(e[8]=I()),l(w,{class:"w-5 h-5"}),e[9]||(e[9]=I()),e[10]||(e[10]=s("span",{class:"font-semibold"},"Himanshu",-1))])])])],2)])}const se=y(Q,[["render",ee]]),te={name:"UserInviteModal",props:{isInviteModalOpen:Boolean,closeInviteModal:Function},setup(){const o=M(),e=x(""),n=x(!1);return{inviteEmail:e,sendInvite:async()=>{if(n.value=!0,!!e.value)try{await o.inviteUser(e.value),e.value=""}catch(c){console.error("Failed to send:",c),n.value=!1}finally{n.value=!1}},loading:n}}},oe={key:0,class:"p-4 fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center"},ne={class:"bg-white p-6 rounded-lg shadow-lg w-full sm:w-96 md:w-1/2 lg:w-1/3 xl:w-1/4"},ae={class:"flex justify-end"},le=["disabled"];function re(o,e,n,t,c,p){return n.isInviteModalOpen?(r(),d("div",oe,[s("div",ne,[e[3]||(e[3]=s("h3",{class:"text-lg font-semibold mb-4"},"Invite a User",-1)),s("form",{onSubmit:e[2]||(e[2]=U((...a)=>t.sendInvite&&t.sendInvite(...a),["prevent"]))},[j(s("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>t.inviteEmail=a),type:"email",placeholder:"Enter email",class:"w-full p-2 mb-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[A,t.inviteEmail]]),s("div",ae,[s("button",{type:"submit",class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",disabled:t.loading},S(t.loading?"Sending...":"Send Invite"),9,le),s("button",{type:"button",onClick:e[1]||(e[1]=(...a)=>n.closeInviteModal&&n.closeInviteModal(...a)),class:"ml-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700"}," Close ")])],32)])])):_("",!0)}const ie=y(te,[["render",re]]),de={name:"Dashboard",components:{Sidebar:se,Header:D,UserInviteModal:ie,UserInfo:E},setup(){const o=M(),e=C(),n=O(),t=o.users,c=o.isLoading,p=x(!1),a=e==null?void 0:e.user,g=(a==null?void 0:a.role)==="ADMIN",m=H(()=>n.path==="/dashboard");R(async()=>{await o.fetchUsers(),console.log(t,"dash")});const f=()=>{p.value=!0},h=()=>{p.value=!1},v=async u=>{await o.deleteUser(u)},w=async u=>{await o.updateUser(u.id,u),console.log("Updated user",u)};return{users:o.users,isLoading:c,isInviteModalOpen:p,openInviteModal:f,closeInviteModal:h,deleteUser:v,updateUser:w,currentUser:a,isAdmin:g,isDashboardRoute:m}}},ce={class:"flex min-h-screen bg-gray-100"},ue={class:"flex-1 flex flex-col lg:ml-64"},pe={class:"flex-1 p-6"},ge={key:0,class:"space-y-6"};function me(o,e,n,t,c,p){const a=i("Sidebar"),g=i("Header"),m=i("router-view"),f=i("UserInviteModal");return r(),d("div",ce,[l(a),s("div",ue,[l(g,{openInviteModal:t.openInviteModal},null,8,["openInviteModal"]),s("main",pe,[t.isDashboardRoute?(r(),d("div",ge,e[0]||(e[0]=[V('<div class="bg-gray-700 text-white p-8 rounded-md shadow-lg mb-6"><h1 class="text-4xl font-bold">Welcome to Easy Manage</h1><p class="text-lg mt-2"> Streamline your account management and explore all features with ease. </p></div><div class="bg-white p-3 rounded-lg shadow-lg"><h2 class="text-2xl font-bold text-gray-800 mb-4"> What You Can Do ? </h2><ul class="space-y-4 text-gray-700"><li class="flex items-start"><span class="w-8 h-8 bg-blue-500 text-white rounded-full flex justify-center items-center mr-4"><i class="fas fa-user-plus"></i></span><div><h3 class="text-lg font-semibold">Register Yourself</h3><p> Create your account quickly and securely, backed by JWT and bcrypt for authentication. </p></div></li><li class="flex items-start"><span class="w-8 h-8 bg-green-500 text-white rounded-full flex justify-center items-center mr-4"><i class="fas fa-key"></i></span><div><h3 class="text-lg font-semibold">Reset Your Password</h3><p> Reset forgotten passwords securely using tokenized email verification. </p></div></li><li class="flex items-start"><span class="w-8 h-8 bg-yellow-500 text-white rounded-full flex justify-center items-center mr-4"><i class="fas fa-envelope"></i></span><div><h3 class="text-lg font-semibold">Invite Users</h3><p> Send user invitations easily via email, powered by secure backend APIs. </p></div></li></ul></div><div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-6"><div class="p-6 rounded-lg bg-white shadow-lg border-l-4 border-blue-600"><h2 class="text-2xl font-bold text-blue-700 mb-4 flex items-center"><i class="fas fa-laptop-code mr-2"></i> Frontend </h2><img src="'+N+'" alt="Vue.js Logo" class="w-16 h-16 mb-4"><p class="text-gray-700 leading-relaxed"> Our platform leverages the power of <span class="text-blue-600 font-semibold">Vue.js</span> to deliver a modern, responsive, and seamless user experience. </p></div><div class="bg-white p-6 rounded-lg shadow-lg border-l-4 border-green-600"><h2 class="text-2xl font-bold text-green-700 mb-4 flex items-center"><i class="fas fa-server mr-2"></i> Backend </h2><img src="'+P+'" alt="Express Logo" class="w-32 h-16 mb-4"><p class="text-gray-700 leading-relaxed"> Built with Node.js and <span class="text-green-600 font-semibold">Express</span>, our backend ensures reliable performance with secure data handling using PostgreSQL. </p></div><div class="bg-white p-6 rounded-lg shadow-lg border-l-4 border-yellow-600"><h2 class="text-2xl font-bold text-yellow-700 mb-4 flex items-center"><i class="fas fa-database mr-2"></i> Database </h2><img src="'+$+'" alt="PostgreSQL Logo" class="w-32 h-16 mb-4"><p class="text-gray-700 leading-relaxed"> Data is securely managed with <span class="text-yellow-600 font-semibold">Prisma ORM</span> and stored in <span class="text-yellow-600 font-semibold">PostgreSQL</span>, providing a robust foundation for all operations. </p></div><div class="bg-white p-6 rounded-lg shadow-lg border-l-4 border-purple-600"><h2 class="text-2xl font-bold text-purple-700 mb-4 flex items-center"><i class="fas fa-shield-alt mr-2"></i> Authentication </h2><img src="'+W+'" alt="JWT Logo" class="w-32 h-16 mb-4"><p class="text-gray-700 leading-relaxed"> We use <span class="text-purple-600 font-semibold">JWT</span> for secure token-based authentication and <span class="text-purple-600 font-semibold">bcrypt</span> for strong password hashing. </p></div></div>',3)]))):_("",!0),l(m)])]),l(f,{isInviteModalOpen:t.isInviteModalOpen,closeInviteModal:t.closeInviteModal},null,8,["isInviteModalOpen","closeInviteModal"])])}const ve=y(de,[["render",me]]);export{ve as default};
