import{U as g}from"./UserInfo-C44dMWSu.js";import{c as a,b as t,o,_ as x,r as c,m as U,h as _,v,f as w,F as h,x as m,j as p,k as y}from"./index-BQ3Iil88.js";import{u as b}from"./userStore-DCSyLt1F.js";function k(n,s){return o(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})])}const A={name:"Admin",components:{UserInfo:g,MagnifyingGlassIcon:k},setup(){const n=b(),s=c(""),d=c([]),e=c(!1);U(async()=>{await n.fetchUsers()});const u=async()=>{if(!s.value.trim()){d.value=[];return}e.value=!0;try{d.value=await n.searchUsers(s.value)}catch(l){console.error("Error searching users:",l)}finally{e.value=!1}},f=async l=>{await n.deleteUser(l),await n.fetchUsers()},i=async(l,r)=>{await n.updateUser(l,r),await n.fetchUsers()};return{searchQuery:s,users:n.users,searchResults:d,searchUsers:u,isLoading:e,deleteUser:f,updateUser:i}}},I={class:"mb-4 flex items-center justify-start"},M={class:"flex flex-wrap md:flex-nowrap gap-6"},S={class:"flex-1 border border-gray-200 rounded p-4"},B={key:0},L={key:1,class:"text-center text-gray-500"},Q={key:0},R={key:1},j={key:2},C={class:"flex-1 border border-gray-200 rounded space-y-2 p-4"};function G(n,s,d,e,u,f){const i=p("MagnifyingGlassIcon"),l=p("UserInfo");return o(),a("div",null,[s[4]||(s[4]=t("h1",{class:"text-2xl font-bold mb-4"},"Admin Area",-1)),s[5]||(s[5]=t("p",null,"Manage users and resources here.",-1)),t("div",I,[_(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=r=>e.searchQuery=r),placeholder:"Search users...",class:"border border-gray-300 rounded p-2 w-full md:w-1/3 focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[v,e.searchQuery]]),t("button",{onClick:s[1]||(s[1]=(...r)=>e.searchUsers&&e.searchUsers(...r)),class:"bg-indigo-600 text-white p-2 mx-2 rounded"},[w(i,{class:"w-6 h-6"})])]),t("div",M,[t("div",S,[s[2]||(s[2]=t("h2",{class:"text-xl font-semibold mb-4"},"Search Results",-1)),e.searchResults.length?(o(),a("div",B,[(o(!0),a(h,null,m(e.searchResults,r=>(o(),y(l,{key:r.id,user:r,"update-user":e.updateUser,"delete-user":e.deleteUser},null,8,["user","update-user","delete-user"]))),128))])):(o(),a("div",L,[e.isLoading&&e.searchQuery?(o(),a("p",Q,"No results found.")):e.isLoading?(o(),a("p",R,"Searching...")):(o(),a("p",j,"Type in the search box and click 'Search' to find users."))]))]),t("div",C,[s[3]||(s[3]=t("h2",{class:"text-xl text-center font-semibold mb-4"},"All Users",-1)),(o(!0),a(h,null,m(e.users,r=>(o(),y(l,{key:r.id,user:r,"update-user":e.updateUser,"delete-user":e.deleteUser},null,8,["user","update-user","delete-user"]))),128))])])])}const F=x(A,[["render",G]]);export{F as default};
