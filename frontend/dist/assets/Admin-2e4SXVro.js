import{U as y}from"./UserInfo-hA9SvE7J.js";import{_ as x,r as u,m as U,c as n,b as t,h as g,v as b,F as f,s as h,j as v,o,k as m}from"./index-CjgUfggO.js";import{u as _}from"./userStore-ed4Io4Ze.js";const w={name:"Admin",components:{UserInfo:y},setup(){const a=_(),s=u(""),l=u([]),e=u(!1);U(async()=>{await a.fetchUsers()});const i=async()=>{if(!s.value.trim()){l.value=[];return}e.value=!0;try{l.value=await a.searchUsers(s.value)}catch(r){console.error("Error searching users:",r)}finally{e.value=!1}},c=async r=>{await a.deleteUser(r),await a.fetchUsers()},d=async(r,p)=>{await a.updateUser(r,p),await a.fetchUsers()};return{searchQuery:s,users:a.users,searchResults:l,searchUsers:i,isLoading:e,deleteUser:c,updateUser:d}}},k={class:"mb-4"},S={class:"flex flex-wrap md:flex-nowrap gap-6"},A={class:"flex-1 border border-gray-200 rounded p-4"},B={key:0},L={key:1,class:"text-center text-gray-500"},Q={key:0},R={key:1},I={key:2},M={class:"flex-1 border border-gray-200 rounded space-y-2 p-4"};function C(a,s,l,e,i,c){const d=v("UserInfo");return o(),n("div",null,[s[4]||(s[4]=t("h1",{class:"text-2xl font-bold mb-4"},"Admin Area",-1)),s[5]||(s[5]=t("p",null,"Manage users and resources here.",-1)),t("div",k,[g(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=r=>e.searchQuery=r),placeholder:"Search users...",class:"border border-gray-300 rounded p-2 w-full md:w-1/3 focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[b,e.searchQuery]]),t("button",{onClick:s[1]||(s[1]=(...r)=>e.searchUsers&&e.searchUsers(...r)),class:"bg-indigo-600 text-white p-2 mt-2 mx-2 w-full md:w-auto rounded"}," Search ")]),t("div",S,[t("div",A,[s[2]||(s[2]=t("h2",{class:"text-xl font-semibold mb-4"},"Search Results",-1)),e.searchResults.length?(o(),n("div",B,[(o(!0),n(f,null,h(e.searchResults,r=>(o(),m(d,{key:r.id,user:r,"update-user":e.updateUser,"delete-user":e.deleteUser},null,8,["user","update-user","delete-user"]))),128))])):(o(),n("div",L,[e.isLoading&&e.searchQuery?(o(),n("p",Q,"No results found.")):e.isLoading?(o(),n("p",R,"Searching...")):(o(),n("p",I,"Type in the search box and click 'Search' to find users."))]))]),t("div",M,[s[3]||(s[3]=t("h2",{class:"text-xl text-center font-semibold mb-4"},"All Users",-1)),(o(!0),n(f,null,h(e.users,r=>(o(),m(d,{key:r.id,user:r,"update-user":e.updateUser,"delete-user":e.deleteUser},null,8,["user","update-user","delete-user"]))),128))])])])}const T=x(w,[["render",C]]);export{T as default};
