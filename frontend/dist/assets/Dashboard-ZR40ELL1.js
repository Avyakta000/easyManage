import{u as _}from"./userStore-ed4Io4Ze.js";import{_ as h,e as I,u as U,j as b,o as r,c as g,b as a,d as i,k as w,w as m,f as c,i as y,r as v,g as L,h as D,v as A,t as j,H as C,l as E,m as B,a as N,n as O}from"./index-CjgUfggO.js";import{U as P}from"./UserInfo-hA9SvE7J.js";import{b as R,_ as V,a as H,c as W}from"./jwt-OtR3VY-h.js";const T={name:"Sidebar",setup(){const l=I(),e=U(),o=l.user,s=(o==null?void 0:o.role)==="ADMIN";return{auth:l,handleLogout:()=>{l.logout().then(()=>{e.push("/login")})},isAdmin:s}}},$={class:"fixed h-screen w-64 bg-blue-600 text-white flex flex-col shadow-lg"},q={class:"flex-1 px-4 py-6 space-y-4"};function F(l,e,o,s,n,d){const t=b("router-link");return r(),g("aside",$,[e[5]||(e[5]=a("blockquote",{class:"text-white bg-blue-700 italic text-lg font-medium p-4"},[i(' "Security is not a product, but a process." '),a("span",{class:"text-right font-semibold text-gray-300"},"— Bruce Schneier")],-1)),a("nav",q,[s.isAdmin?(r(),w(t,{key:0,to:"/dashboard/admin",class:"block px-4 py-2 rounded-lg hover:bg-blue-500 transition","exact-active-class":"bg-blue-800"},{default:m(()=>e[1]||(e[1]=[i(" Admin Home ")])),_:1})):(r(),w(t,{key:1,to:"/dashboard",class:"block px-4 py-2 rounded-lg hover:bg-blue-500 transition","exact-active-class":"bg-blue-800"},{default:m(()=>e[2]||(e[2]=[i(" Home ")])),_:1})),c(t,{to:"/dashboard/profile",class:"block px-4 py-2 rounded-lg hover:bg-blue-500 transition","exact-active-class":"bg-blue-800"},{default:m(()=>e[3]||(e[3]=[i(" Profile ")])),_:1}),c(t,{to:"/dashboard/reset-password",class:"block px-4 py-2 rounded-lg hover:bg-blue-500 transition","exact-active-class":"bg-blue-800"},{default:m(()=>e[4]||(e[4]=[i(" Change Password ")])),_:1}),s.auth.isAuthenticated?(r(),g("button",{key:2,onClick:e[0]||(e[0]=(...u)=>s.handleLogout&&s.handleLogout(...u)),class:"w-full text-left px-4 py-2 rounded-lg hover:bg-blue-500 transition"}," Logout ")):y("",!0)]),e[6]||(e[6]=a("footer",{class:"px-4 py-4 bg-gray-900 text-center border-t border-blue-500"},[a("p",{class:"text-sm"},[i(" © 2024 Easy Manage"),a("br"),i(" Developed by "),a("span",{class:"font-semibold"},"Himanshu")])],-1))])}const J=h(T,[["render",F],["__scopeId","data-v-bd8acb9d"]]),Q={name:"UserInviteModal",props:{isInviteModalOpen:Boolean,closeInviteModal:Function},setup(){const l=_(),e=v(""),o=v(!1);return{inviteEmail:e,sendInvite:async()=>{if(o.value=!0,!!e.value)try{await l.inviteUser(e.value),e.value=""}catch(n){console.error("Failed to send:",n),o.value=!1}finally{o.value=!1}},loading:o}}},Y={key:0,class:"p-4 fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center"},z={class:"bg-white p-6 rounded-lg shadow-lg w-full sm:w-96 md:w-1/2 lg:w-1/3 xl:w-1/4"},G={class:"flex justify-end"},K=["disabled"];function X(l,e,o,s,n,d){return o.isInviteModalOpen?(r(),g("div",Y,[a("div",z,[e[3]||(e[3]=a("h3",{class:"text-lg font-semibold mb-4"},"Invite a User",-1)),a("form",{onSubmit:e[2]||(e[2]=L((...t)=>s.sendInvite&&s.sendInvite(...t),["prevent"]))},[D(a("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>s.inviteEmail=t),type:"email",placeholder:"Enter email",class:"w-full p-2 mb-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[A,s.inviteEmail]]),a("div",G,[a("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",disabled:s.loading},j(s.loading?"Sending...":"Send Invite"),9,K),a("button",{type:"button",onClick:e[1]||(e[1]=(...t)=>o.closeInviteModal&&o.closeInviteModal(...t)),class:"ml-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700"}," Close ")])],32)])])):y("",!0)}const Z=h(Q,[["render",X]]),ee={name:"Dashboard",components:{Sidebar:J,Header:C,UserInviteModal:Z,UserInfo:P},setup(){const l=_(),e=I(),o=O(),s=l.users,n=l.isLoading,d=v(!1),t=e==null?void 0:e.user,u=(t==null?void 0:t.role)==="ADMIN",f=E(()=>o.path==="/dashboard");B(async()=>{await l.fetchUsers(),console.log(s,"dash")});const x=()=>{d.value=!0},M=()=>{d.value=!1},k=async p=>{await l.deleteUser(p)},S=async p=>{await l.updateUser(p.id,p),console.log("Updated user",p)};return{users:l.users,isLoading:n,isInviteModalOpen:d,openInviteModal:x,closeInviteModal:M,deleteUser:k,updateUser:S,currentUser:t,isAdmin:u,isDashboardRoute:f}}},se={class:"flex min-h-screen bg-gray-100"},te={class:"flex-1 flex flex-col ml-64"},oe={class:"flex-1 p-6"},ae={key:0,class:"space-y-6"};function le(l,e,o,s,n,d){const t=b("Sidebar"),u=b("Header"),f=b("router-view"),x=b("UserInviteModal");return r(),g("div",se,[c(t),a("div",te,[c(u,{openInviteModal:s.openInviteModal},null,8,["openInviteModal"]),a("main",oe,[s.isDashboardRoute?(r(),g("div",ae,e[0]||(e[0]=[N('<div class="bg-gray-800 text-white p-8 rounded-md shadow-lg mb-6"><h1 class="text-4xl font-bold">Welcome to Easy Manage</h1><p class="text-lg mt-2"> Streamline your account management and explore all features with ease. </p></div><div class="bg-white p-3 rounded-lg shadow-lg"><h2 class="text-2xl font-bold text-gray-800 mb-4"> What You Can Do ? </h2><ul class="space-y-4 text-gray-700"><li class="flex items-start"><span class="w-8 h-8 bg-blue-500 text-white rounded-full flex justify-center items-center mr-4"><i class="fas fa-user-plus"></i></span><div><h3 class="text-lg font-semibold">Register Yourself</h3><p> Create your account quickly and securely, backed by JWT and bcrypt for authentication. </p></div></li><li class="flex items-start"><span class="w-8 h-8 bg-green-500 text-white rounded-full flex justify-center items-center mr-4"><i class="fas fa-key"></i></span><div><h3 class="text-lg font-semibold">Reset Your Password</h3><p> Reset forgotten passwords securely using tokenized email verification. </p></div></li><li class="flex items-start"><span class="w-8 h-8 bg-yellow-500 text-white rounded-full flex justify-center items-center mr-4"><i class="fas fa-envelope"></i></span><div><h3 class="text-lg font-semibold">Invite Users</h3><p> Send user invitations easily via email, powered by secure backend APIs. </p></div></li></ul></div><div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-6"><div class="p-6 rounded-lg bg-white shadow-lg border-l-4 border-blue-600"><h2 class="text-2xl font-bold text-blue-700 mb-4 flex items-center"><i class="fas fa-laptop-code mr-2"></i> Frontend </h2><img src="'+R+'" alt="Vue.js Logo" class="w-16 h-16 mb-4"><p class="text-gray-700 leading-relaxed"> Our platform leverages the power of <span class="text-blue-600 font-semibold">Vue.js</span> to deliver a modern, responsive, and seamless user experience. </p></div><div class="bg-white p-6 rounded-lg shadow-lg border-l-4 border-green-600"><h2 class="text-2xl font-bold text-green-700 mb-4 flex items-center"><i class="fas fa-server mr-2"></i> Backend </h2><img src="'+V+'" alt="Express Logo" class="w-32 h-16 mb-4"><p class="text-gray-700 leading-relaxed"> Built with Node.js and <span class="text-green-600 font-semibold">Express</span>, our backend ensures reliable performance with secure data handling using PostgreSQL. </p></div><div class="bg-white p-6 rounded-lg shadow-lg border-l-4 border-yellow-600"><h2 class="text-2xl font-bold text-yellow-700 mb-4 flex items-center"><i class="fas fa-database mr-2"></i> Database </h2><img src="'+H+'" alt="PostgreSQL Logo" class="w-32 h-16 mb-4"><p class="text-gray-700 leading-relaxed"> Data is securely managed with <span class="text-yellow-600 font-semibold">Prisma ORM</span> and stored in <span class="text-yellow-600 font-semibold">PostgreSQL</span>, providing a robust foundation for all operations. </p></div><div class="bg-white p-6 rounded-lg shadow-lg border-l-4 border-purple-600"><h2 class="text-2xl font-bold text-purple-700 mb-4 flex items-center"><i class="fas fa-shield-alt mr-2"></i> Authentication </h2><img src="'+W+'" alt="JWT Logo" class="w-32 h-16 mb-4"><p class="text-gray-700 leading-relaxed"> We use <span class="text-purple-600 font-semibold">JWT</span> for secure token-based authentication and <span class="text-purple-600 font-semibold">bcrypt</span> for strong password hashing. </p></div></div>',3)]))):y("",!0),c(f)])]),c(x,{isInviteModalOpen:s.isInviteModalOpen,closeInviteModal:s.closeInviteModal},null,8,["isInviteModalOpen","closeInviteModal"])])}const ce=h(ee,[["render",le]]);export{ce as default};
